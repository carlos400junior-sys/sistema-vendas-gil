{% extends "base.html" %}
{% block conteudo %}

<div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-10 gap-4">
    <div>
        <h1 class="text-3xl font-extrabold text-slate-900 tracking-tight">Estoque de Pe√ßas</h1>
        <p class="text-slate-500">Gerencie seu invent√°rio e acompanhe a disponibilidade em tempo real.</p>
    </div>
    <a href="{{ url_for('cadastrar') }}" class="bg-blue-600 text-white px-8 py-4 rounded-2xl font-bold shadow-lg shadow-blue-200 hover:bg-blue-700 hover:-translate-y-1 transition-all active:scale-95">
        + Adicionar Pe√ßa
    </a>
</div>

<!-- CONTAINER DA TABELA -->
<div class="bg-white rounded-[2.5rem] border border-slate-200 shadow-sm overflow-hidden">
    <table class="w-full text-left border-collapse">
        <thead>
            <tr class="bg-slate-50/50">
                <th class="px-6 py-5 text-slate-500 font-bold text-xs uppercase tracking-widest">Produto</th>
                <th class="px-6 py-5 text-slate-500 font-bold text-xs uppercase tracking-widest">Categoria</th>
                <th class="px-6 py-5 text-slate-500 font-bold text-xs uppercase tracking-widest text-center">Pre√ßo</th>
                <th class="px-6 py-5 text-slate-500 font-bold text-xs uppercase tracking-widest text-center">Quantidade</th>
            </tr>
        </thead>
        <tbody class="divide-y divide-slate-100">
            {% for peca in pecas %}
            <tr class="hover:bg-slate-50/50 transition-colors group">
                <td class="px-6 py-4">
                    <div class="flex items-center gap-4">
                        <!-- Miniatura da Foto -->
                        <div class="w-14 h-14 rounded-2xl overflow-hidden border border-slate-200 bg-slate-100 flex-shrink-0">
                            <img src="{{ url_for('static', filename='uploads/' + peca.foto) if peca.foto else url_for('static', filename='img/default.png') }}" 
                                 class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500">
                        </div>
                        <div>
                            <span class="font-bold text-slate-900 block text-lg">{{ peca.nome }}</span>
                            <span class="text-xs text-slate-400">ID: #{{ peca.id }}</span>
                        </div>
                    </div>
                </td>
                <td class="px-6 py-4">
                    <span class="bg-slate-100 text-slate-600 px-3 py-1 rounded-full text-xs font-black uppercase tracking-tight">
                        {{ peca.categoria if peca.categoria else 'Sem Categoria' }}
                    </span>
                </td>
                <td class="px-6 py-4 text-center">
                    <span class="font-bold text-blue-600 text-lg">R$ {{ "%.2f"|format(peca.preco) }}</span>
                </td>
                <td class="px-6 py-4 text-center">
                    {% if peca.quantidade <= 5 %}
                        <div class="inline-flex flex-col items-center">
                            <span class="text-red-500 font-black text-xl">{{ peca.quantidade }}</span>
                            <span class="text-[10px] text-red-400 font-bold uppercase">Estoque Baixo</span>
                        </div>
                    {% else %}
                        <div class="inline-flex flex-col items-center">
                            <span class="text-slate-700 font-black text-xl">{{ peca.quantidade }}</span>
                            <span class="text-[10px] text-slate-400 font-bold uppercase">Dispon√≠vel</span>
                        </div>
                    {% endif %}
                </td>
            </tr>
            {% else %}
            <tr>
                <td colspan="4" class="px-6 py-20 text-center">
                    <div class="text-slate-300 text-5xl mb-4">üì¶</div>
                    <p class="text-slate-400 font-bold">Seu estoque est√° vazio no momento.</p>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}
